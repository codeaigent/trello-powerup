<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>GitHub Authorization Success</title>
  <style>
    body {
      padding: 1rem;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>Authorization Successful!</h1>
  <p>You can close this window now.</p>

  <script>
    // Get code from URL
    const urlParams = new URLSearchParams(window.location.search);
    const code = urlParams.get('code');
    const state = urlParams.get('state');

    // Try to use window.opener to pass back the code
    if (window.opener) {
      try {
        window.opener.authorize(code, state);
      } catch (e) {
        console.error('Could not access opener, falling back to localStorage');
        localStorage.setItem('github_code', code);
        localStorage.setItem('github_state', state);
      }
    } else {
      localStorage.setItem('github_code', code);
      localStorage.setItem('github_state', state);
    }

    // Close the window after a short delay
    setTimeout(function() {
      window.close();
    }, 1000);
  </script>
</body>
</html> 